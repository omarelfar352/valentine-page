<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>I promise it is not a virus</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
  }

  .intro {
    font-size: 1.5rem;
    font-weight: bold;
    color: #FF2E51;
    font-family: "Dancing Script", "Segoe UI", cursive;
    margin-bottom: 0.5rem;
  }

  .subtext {
    font-size: 1.2rem;
    font-weight: bold;
    color: #A3001B;
    margin-bottom: 1rem;
  }

  .card {
    background: white;
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    max-width: 500px;
    width: 90%;
    text-align: center;
    overflow: hidden;
  }

  h1 { color: #e63946; margin-bottom: 1rem; }
  p { font-size: 1.1rem; margin-bottom: 1.5rem; }

  #countdown {
    font-weight: bold;
    color: #A3001B;
    margin-bottom: 1.8rem;
  }

  button {
    font-size: 1rem;
    padding: 0.75rem 1.5rem;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    margin: 0.5rem;
    transition: transform 0.2s;
  }

  button:hover { transform: scale(1.05); }

  .yes { background-color: #e63946; color: white; }
  .no { background-color: #ccc; color: #333; }

  .date-option {
    background-color: #ff6b6b;
    color: white;
  }

  .date-option:hover {
    background-color: #e63946;
  }

  /* Equal-size song buttons */
  .song-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
  }

  .song-controls button {
    flex: 1;
    max-width: 160px;
  }

  .photo-stack {
    position: relative;
    height: 400px;
    margin-top: 1rem;
  }

  .photo-stack img {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 300px;
    max-height: 400px;
    border-radius: 15px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    transition: transform 0.3s ease, opacity 0.3s ease;
    touch-action: none;
  }
</style>
</head>

<body>

<audio id="bgMusic"></audio>

<div class="card" id="card">
  <h1>POOOOOOKKKK YOU CAME BACK!!!</h1>
  <p class="intro">I made some changes :)</p>
  <p class="intro">I love you to the furthest galaxy and back...</p>
  <p class="subtext">I have an important question for you mi pook‚Ä¶</p>
  <h1>üíñ Will You Be My Valentine? üíñ</h1>
  <div id="countdown">Loading countdown‚Ä¶</div>
  <button class="yes" id="yesBtn">Yes üíï</button>
  <button class="no" id="noBtn">No üôÉ</button>
</div>

<script>
window.onload = function() {

  const card = document.getElementById("card");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const countdownEl = document.getElementById("countdown");
  const music = document.getElementById("bgMusic");

  const songs = [
    "song1.mp3","song2.mp3","song3.mp3","song4.mp3",
    "song5.mp3","song6.mp3","song7.mp3","song8.mp3",
    "song9.mp3","song10.mp3","song11.mp3"
  ];

  let currentSongIndex = 0;
  let isPlaying = false;
  let isFading = false;

  /* ----------- FADE FUNCTIONS ----------- */

  function fadeIn() {
    let vol = 0;
    music.volume = 0;
    const fade = setInterval(() => {
      if (vol < 1) {
        vol += 0.05;
        music.volume = Math.min(vol, 1);
      } else {
        clearInterval(fade);
      }
    }, 50);
  }

  function fadeOut(callback) {

    if (!isPlaying) {
      if (callback) callback();
      return;
    }

    if (isFading) return;
    isFading = true;

    let vol = music.volume;

    const fade = setInterval(() => {
      if (vol > 0.02) {
        vol -= 0.1;
        music.volume = Math.max(vol, 0);
      } else {
        clearInterval(fade);
        music.pause();
        isFading = false;
        if (callback) callback();
      }
    }, 50);
  }

  function playSong(index) {

    if (index < 0) index = songs.length - 1;
    if (index >= songs.length) index = 0;

    fadeOut(() => {
      currentSongIndex = index;
      music.src = songs[currentSongIndex];

      music.play().then(() => {
        isPlaying = true;
        fadeIn();
      }).catch(() => console.log("Autoplay blocked."));
    });
  }

  // Auto-play next song when one ends
  music.addEventListener("ended", () => {
    playSong(currentSongIndex + 1);
  });

  /* ----------- BUTTON LOGIC ----------- */

  yesBtn.onclick = function() {
    card.innerHTML = `
      <h1>ü•∞ YAY!!! ü•∞</h1>
      <p>I knew it ‚ù§Ô∏è<br><br>
      Happy Valentine‚Äôs Day mi lil most precious most adorable most cutie patootie zanzuni patoonie princess üíê</p>
      <p>Please choose a date:</p>
      <button class="date-option" id="date1">Feb 13 at 6:30 PM</button>
      <button class="date-option" id="date2">Feb 14 at 2 PM</button>
    `;

    document.getElementById("date1").onclick = () => showPhotos('Feb 13 at 6:30 PM');
    document.getElementById("date2").onclick = () => showPhotos('Feb 14 at 2 PM');
  };

  noBtn.onclick = () => {
    noBtn.textContent = "That‚Äôs not nice POOK! üò†";
    noBtn.disabled = true;
    setTimeout(() => {
      noBtn.textContent = "No üôÉ";
      noBtn.disabled = false;
    }, 3000);
  };

  /* ----------- COUNTDOWN ----------- */

  const valentineDate = new Date("February 14, 2026 00:00:00").getTime();

  setInterval(() => {
    const now = new Date().getTime();
    const distance = valentineDate - now;

    if(distance < 0){
      countdownEl.textContent = "üíò It‚Äôs Valentine‚Äôs Day!";
      return;
    }

    const days = Math.floor(distance/(1000*60*60*24));
    const hours = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
    const minutes = Math.floor((distance%(1000*60*60))/(1000*60));
    const seconds = Math.floor((distance%(1000*60))/1000);

    countdownEl.textContent =
      `‚è≥ ${days}d ${hours}h ${minutes}m ${seconds}s until Valentine‚Äôs Day`;
  },1000);

  /* ----------- PHOTO SYSTEM ----------- */

  const photos = [
    "photo1.JPEG","photo2.JPEG","photo3.JPEG","photo4.JPEG",
    "photo5.JPEG","photo6.JPEG","photo7.JPEG","photo8.JPEG",
    "photo9.JPEG","photo10.JPEG","photo11.JPEG","photo12.JPEG",
    "photo13.JPEG","photo14.JPEG","photo15.JPEG","photo16.JPEG"
  ];

  let currentIndex = 0;
  let startX=0, currentX=0, isDragging=false;

  function showPhotos(date){

    card.innerHTML = `
      <h1>üéâ See you then! üéâ</h1>
      <p>Can‚Äôt wait to see you on <strong>${date}</strong>! üíñ</p>

      <div class="photo-stack" id="photoStack"></div>
      <p>Swipe left/right to see more photos!</p>

      <div class="song-controls">
        <button id="prevSong" class="date-option">‚¨ÖÔ∏è Previous</button>
        <button id="nextSong" class="date-option">Next ‚û°Ô∏è</button>
      </div>
    `;

    currentIndex = 0;
    renderPhoto();
    enableSwipe();

    document.getElementById("prevSong").onclick =
      () => playSong(currentSongIndex - 1);

    document.getElementById("nextSong").onclick =
      () => playSong(currentSongIndex + 1);

    playSong(currentSongIndex);
  }

  function renderPhoto(){
    const stack = document.getElementById("photoStack");
    stack.innerHTML = "";

    for(let i=currentIndex;i<photos.length;i++){
      const img=document.createElement("img");
      img.src=photos[i];
      img.style.zIndex=photos.length-i;
      img.style.opacity=(i===currentIndex)?1:0.8;
      stack.appendChild(img);
    }
  }

  function enableSwipe(){
    const stack = document.getElementById("photoStack");
    let topCard = stack.querySelector("img");

    function startDrag(e){
      isDragging=true;
      startX = e.touches ? e.touches[0].clientX : e.clientX;
    }

    function drag(e){
      if(!isDragging) return;
      currentX = e.touches ? e.touches[0].clientX : e.clientX;
      const deltaX=currentX-startX;
      if(topCard) topCard.style.transform = `translateX(${deltaX}px)`;
    }

    function endDrag(){
      if(!isDragging) return;
      isDragging=false;
      const deltaX=currentX-startX;

      if(Math.abs(deltaX)>80){
        topCard.style.transition="transform 0.3s ease, opacity 0.3s ease";
        topCard.style.transform=`translateX(${deltaX>0?500:-500}px)`;
        topCard.style.opacity=0;

        setTimeout(()=>{
          currentIndex++;
          if(currentIndex>=photos.length) currentIndex=0;
          renderPhoto();
          enableSwipe();
        },300);
      } else {
        topCard.style.transition="transform 0.3s ease";
        topCard.style.transform="translateX(0)";
      }
    }

    stack.addEventListener("mousedown", startDrag);
    stack.addEventListener("mousemove", drag);
    stack.addEventListener("mouseup", endDrag);
    stack.addEventListener("mouseleave", endDrag);

    stack.addEventListener("touchstart", startDrag);
    stack.addEventListener("touchmove", drag);
    stack.addEventListener("touchend", endDrag);
  }

};
</script>

</body>
</html>
